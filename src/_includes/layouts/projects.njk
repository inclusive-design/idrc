{% if previewMode %}
    {% extends 'layouts/preview.njk' %}
{% else %}
    {% extends 'layouts/base.njk' %}
{% endif %}

{% set pageType = 'page--projects-and-tools' %}

{% block content %}
    <article>
        {% include 'partials/components/page-header.njk' %}
        <section id="projects" class="section section--full">
            <div class="wrapper">
                <div class="section__content">
                    <span class="hr"></span>
                    <h2>Projects</h2>
                    <div class="projects">
                        {% for project in collections.projects %}
                        <div class="project">
                            <h3>{{ project.data.title }}{{ " (" + project.data.shortName + ")" if project.data.shortName }}</h3>
                            {{ project.data.description | markdown | safe }}
                            {% if project.data.tags.length > 0 %}
                            <p class="tags">
                                {% for tag in project.data.tags %}
                                <span class="tag">{{ tag | safe }}</span>
                                {% endfor %}
                            </p>
                            {% endif %}
                            {% if project.data.thumbnailImage %}
                                {% set thumbnail = 'src' + project.data.thumbnailImage %}
                                {% set thumbnail1x = thumbnail | resize({width: 570, height: 382, fit: 'cover'}) | png %}
                                {% set thumbnail2x = thumbnail | resize({width: 1140, height: 764, fit: 'cover'}) | png %}
                                <img class="thumbnail" src="{% getUrl thumbnail1x %}" srcset="{% getUrl thumbnail1x %} 1x, {% getUrl thumbnail2x %} 2x" width="570" height="382" alt="" />
                            {% endif %}
                            <p class="project__link"><a rel="external" href="{{ project.data.link }}">Visit {{ project.data.shortName if project.data.shortName else project.data.title }} website</a></p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </section>
        <section id="tools" class="section section--full">
            <div class="wrapper">
                <div class="section__content">
                    <span class="hr"></span>
                    <h2>Tools</h2>
                    <div class="tools">
                        {% for tool in collections.tools %}
                        <div class="tool">
                            <h3>{{ tool.data.title }}{{ " (" + tool.data.shortName + ")" if tool.data.shortName }}</h3>
                            {{ tool.data.description | markdown | safe }}
                            {% if tool.data.tags.length > 0 %}
                            <p class="tags">
                                {% for tag in tool.data.tags %}
                                <span class="tag">{{ tag | safe }}</span>
                                {% endfor %}
                            </p>
                            {% endif %}
                            {% if tool.data.thumbnailImage %}
                                {% set thumbnail = 'src' + tool.data.thumbnailImage %}
                                {% set thumbnail1x = thumbnail | resize({width: 570, height: 382, fit: 'cover'}) | png %}
                                {% set thumbnail2x = thumbnail | resize({width: 1140, height: 764, fit: 'cover'}) | png %}
                                <img class="thumbnail" src="{% getUrl thumbnail1x %}" srcset="{% getUrl thumbnail1x %} 1x, {% getUrl thumbnail2x %} 2x" width="570" height="382" alt="" />
                            {% endif %}
                            <p class="tool__link"><a rel="external" href="{{ tool.data.link }}">Visit {{ tool.data.shortName if tool.data.shortName else tool.data.title }} website</a></p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </section>
    </article>
{% endblock %}
